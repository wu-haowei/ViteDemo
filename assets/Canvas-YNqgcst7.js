import{x as v,A as g,o as f,a as w,b as u}from"./index-MKLqaeYq.js";const x={id:"image"},p=["src"],y={__name:"Canvas",setup(P){const i=v(null),e=v(null),t=v(null);g(()=>{t.value=e.value.getContext("2d");let o=e.value.width,a=e.value.height;window.devicePixelRatio&&(e.value.style.width=o+"px",e.value.style.height=a+"px",e.value.height=a*window.devicePixelRatio,e.value.width=o*window.devicePixelRatio,t.value.scale(window.devicePixelRatio,window.devicePixelRatio)),e.value.addEventListener("mousedown",function(l){var n=s(e.value,l);t.value.beginPath(),t.value.moveTo(n.x,n.y),l.preventDefault(),e.value.addEventListener("mousemove",d,!1)}),e.value.addEventListener("mouseup",function(){e.value.removeEventListener("mousemove",d,!1)},!1),e.value.addEventListener("touchstart",function(l){var n=c(e,l);t.value.beginPath(n.x,n.y),t.value.moveTo(n.x,n.y),l.preventDefault(),e.value.addEventListener("touchmove",r,!1)}),e.value.addEventListener("touchend",function(){e.value.removeEventListener("touchmove",r,!1)},!1)});const h=()=>{t.value.clearRect(0,0,e.value.width,e.value.height),i.value=""},m=()=>{var o=e.value.toDataURL("image/png");i.value=o},s=(o,a)=>{var l=o.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top}},c=(o,a)=>{var l=o.value.getBoundingClientRect();return{x:a.touches[0].clientX-l.left,y:a.touches[0].clientY-l.top}},r=o=>{var a=c(e,o);t.value.lineWidth=2,t.value.lineCap="round",t.value.lineJoin="round",t.value.shadowBlur=1,t.value.shadowColor="black",t.value.lineTo(a.x,a.y),t.value.stroke()},d=o=>{var a=s(e.value,o);t.value.lineCap="round",t.value.lineWidth=2,t.value.lineJoin="round",t.value.shadowBlur=1,t.value.shadowColor="black",t.value.lineTo(a.x,a.y),t.value.stroke()};return(o,a)=>(f(),w("div",null,[u("canvas",{ref_key:"canvas",ref:e,width:"600",height:"300"},null,512),u("button",{onClick:h},"清除"),u("button",{onClick:m},"轉圖"),u("div",x,[u("img",{src:i.value},null,8,p)])]))}};export{y as default};
